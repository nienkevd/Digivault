<!DOCTYPE html>
<html lang="en">
<head>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta charset="UTF-8">
    <title>DIGIVAULT</title>
    <link href="css/style.css" rel="stylesheet">
<!--    <script src="js/script.js"></script>-->
    <script>
        'use strict';
        // Loginpagina: actie bij klik op login knop en ingevulde velden

        // stuur data als form data ipv json, want backend accepteert alleen form
        // var formData = `emailadres=${email}&wachtwoord=${wachtwoord}`;

        document.getElementById("login").addEventListener("click", (e) => {
            let email = document.getElementById("email_login").value;
            let wachtwoord = document.getElementById("wachtwoord_login").value;

            let data = {'emailadres': email, 'wachtwoord': wachtwoord};

            e.preventDefault();
            const login = 'http://localhost:8080/login';
            console.log(JSON.stringify(data));
            fetch(login, {
                method: "POST",
                headers: {
                    'Content-Type': 'application/json',
                    'Access-Control-Allow-Origin': '*'
                },
                body: JSON.stringify(data),
            })
                .then((response) => {
                    console.log(response);
                    return response.json()})
                .then((data) => {
                    console.log(data);
                    // code here //
                    if (data.error) {
                        alert("Error Password or Username"); /*displays error message*/
                    } else {
                        alert("Login geslaagd!")
                    }
                })
                .catch((err) => {
                    console.log(err);
                });
        });














    </script>
</head>
<body>
<a href="index.html"><img src="images/logoDigivault.png" height="250" width="500"></a>
<div class="loginPagina">
    <img src="https://media2.fdncms.com/orlando/imager/u/original/4586792/valentina.jpg" class="avatar" width="100" height="100">
    <h1> Login Here</h1>
    <form id = "loginForm">
        <p> Username </p>
        <input id = "emailadres_veld" type = "text" name="" placeholder="Enter Username">
        <p>Password</p>
        <input id = "wachtwoord_veld" type="password" name="" placeholder="Enter Password">
        <input id = "btnLogin" type="submit" name="" value="Login">
        <a href="#"> Wachtwoord vergeten?</a> <br>
        <a href="#"> Registreren? </a>
    </form>
</div>
</body>
</html>